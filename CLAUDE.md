# CLAUDE.md — Generic Power BI Multi-Tab Dashboard
<!-- Auto-generated by .specify workflow — do not edit the structure -->

**Last updated**: 2025-07-14

---

## Project Overview

**Generic Power BI Multi-Tab Dashboard** — A Dynamics 365 web resource that embeds
Power BI reports in a configurable multi-tab React UI, driven by Dataverse configuration
records.

- **Profile**: ux-demo
- **Version**: 1.4.7
- **Status**: DEVELOPMENT

---

## Active Technologies

- JavaScript + React 18 (CDN) + Tailwind CSS (CDN) + Babel (in-browser JSX)
- Dynamics 365 Xrm.WebApi — Dataverse entity `genbbid_genericpbidashboard`
- Power BI Embedded (autoAuth iframe)

---

## Project Structure

```
genbbid_GenericPowerBIDashboardsSimple.html   # Simple single-iframe PBI embed
genbbid_pbi_dashboard.html                     # Multi-tab React dashboard (v1.4.7)
read.me                                        # Readme stub
SYSTEM_MANIFEST.json.md                        # SpeckKit manifest (ux-demo)
UX_INVARIANTS.md                               # UX invariants document
TEST_ACCEPTANCE.md                             # Acceptance test checklist
SPEC.md                                        # Optional specification stub
CLAUDE.md                                      # This file
.github/copilot-instructions.md                # SpeckKit agent behavior config
.specify/                                      # Spec-driven development workflow
  memory/constitution.md
  templates/                                   # 6 template files
  scripts/powershell/                          # 5 PowerShell scripts
```

---

## Build / Test / Lint Commands

```bash
# No build step — HTML web resources are deployed directly to Dynamics 365
# Test by opening in a Dynamics 365 model-driven app or via direct URL
```

---

## Code Conventions

- **JavaScript (ES2020+)**: Arrow functions, template literals, async/await
- **React**: Functional components with hooks (`useState`, `useEffect`), no class components
- **Styling**: Tailwind CSS utility classes — no custom CSS unless unavoidable
- **Data Access**: Always use `Xrm.WebApi.retrieveMultipleRecords` for Dataverse queries
- **Error Handling**: Graceful degradation — show user-friendly error states, never blank screens
- **iframes**: Use `extractSrc()` to normalise both raw URLs and pasted `<iframe>` snippets
- **Tabs**: Support 1–5 dynamic tabs; hide unused tabs, never show empty tab labels

---

## UX Invariants (Summary)

1. Full-viewport layout with zero margins/padding on `<html>` and `<body>`
2. Tab bar is sticky at top; active tab uses brand colour with bottom border
3. Iframes fill remaining viewport height (`calc(100vh - tabBarHeight)`)
4. Loading spinner centred on screen during data fetch
5. Error panel displayed on Xrm.WebApi failure — never a blank page
6. Brand colours are runtime-configurable from Dataverse record fields
7. Simple variant (`GenericPowerBIDashboardsSimple.html`) is chrome-free, single iframe

---

## Recent Changes

- Initial `.specify` scaffolding and SpeckKit integration (2025-07-14)

---

## SpeckKit Integration

This project is registered in the SpeckKit registry:
- **Registry**: https://github.com/bradlaw76/SpeckKit-Project-Development
- **Project ID**: `generic-powerbi-multitab`
- **Manifest Index**: v1.3

Code standards (component header comment blocks) are auto-applied.
UI references require user confirmation before loading.
